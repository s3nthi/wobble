---
import "../styles/global.css";

import ThemeToggle from "../components/ThemeToggle.astro";
import WobbleText from "../components/WobbleText.astro";

const PAGES = ["how-it-works", "about"];
---

<nav class="px-6 py-4 bg-sec-bg w-screen">
  <div class="max-w-4xl mx-auto flex justify-between">
    <a href="/" class="hover:no-underline flex gap-0.5 items-center w-fit">
      <WobbleText />
    </a>

    <div class="flex gap-4 items-center">
        <ThemeToggle />
        {
          PAGES.map((page) => (
            <a
              href={`/${page}`}
              class="text-sm capitalize"
            >{page.replaceAll("-", " ")}
            </a>
          ))
        }
    </div>
  </div>
</nav>

<script type="module">
  const savedTheme = localStorage.getItem("theme") || "default";

  function applyTheme(theme) {
    if (theme === "default") {
      document.documentElement.removeAttribute("data-theme");
      localStorage.removeItem("theme");
    } else {
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem("theme", theme);
    }

    const sunIcon = document.getElementById("theme-icon-sun");
    const moonIcon = document.getElementById("theme-icon-moon");
    if (theme === "dark") {
      sunIcon.style.display = "none";
      moonIcon.style.display = "inline";
    } else {
      sunIcon.style.display = "inline";
      moonIcon.style.display = "none";
    }
  }

  let currentTheme = savedTheme;
  applyTheme(currentTheme);

  document.getElementById("theme-toggle-btn").addEventListener("click", () => {
    currentTheme = currentTheme === "dark" ? "default" : "dark";
    applyTheme(currentTheme);
  });
</script>
